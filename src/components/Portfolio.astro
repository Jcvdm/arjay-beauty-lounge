---
// Portfolio.astro - Responsive grid gallery with PhotoSwipe lightbox
import 'photoswipe/style.css';
import { portfolio } from '../data/portfolio';
---

<section id="portfolio" class="py-20 snap-start min-h-screen flex flex-col justify-center">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-20">
    <!-- Section Header -->
    <div class="text-center mb-10">
      <div class="inline-flex items-center px-6 py-3 rounded-full bg-white/90 backdrop-blur-sm border border-cyan-200/60 text-primary-700 text-sm font-medium mb-6 shadow-lg">
        <span class="w-2 h-2 bg-primary-500 rounded-full mr-2 animate-pulse"></span>
        Portfolio / Recent Work
      </div>
      <h2 class="text-3xl md:text-4xl font-serif font-bold text-gray-800 mb-3">
        See Our <span class="text-primary-600">Beautiful Results</span>
      </h2>
      <p class="text-base text-gray-700 max-w-2xl mx-auto">
        A curated selection of our favorite looks. Tap any photo to view.
      </p>
    </div>

    <!-- Gallery Grid -->
    <div id="portfolio-grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">
      {portfolio.map((it) => (
        <a href={it.full}
           aria-label={it.alt}
           class="contents">
          <img src={it.thumb}
               alt={it.alt}
               width="300" height="400"
               loading="lazy" decoding="async"
               class="w-full h-40 md:h-48 object-cover rounded-2xl shadow-sm border border-primary-200/40 bg-white/60" />
        </a>
      ))}
    </div>
  </div>

  <!-- PhotoSwipe Init -->
  <script>
    import PhotoSwipeLightbox from 'photoswipe/lightbox';
    import pswpModule from 'photoswipe';

    const lightbox = new PhotoSwipeLightbox({
      pswpModule,
      gallery: '#portfolio-grid',
      children: 'a',
      padding: { top: 16, bottom: 16, left: 16, right: 16 },
      wheelToZoom: true,
      bgOpacity: 0.95,
    });

    document.addEventListener('astro:page-load', () => {
      lightbox.init();
    });
  </script>
</section>

